namespace: signoz
serverSideApply: true

# Ignore Kubernetes runtime defaults that cause perpetual drift
ignoreDifferences:
  # ClickHouse operator metrics-exporter adds divisor: "0" defaults to resourceFieldRef
  - group: apps
    kind: Deployment
    name: signoz-clickhouse-operator
    jqPathExpressions:
      - .spec.template.spec.containers[].env[].valueFrom.resourceFieldRef.divisor
  # StatefulSets get runtime defaults (revisionHistoryLimit, persistentVolumeClaimRetentionPolicy)
  - group: apps
    kind: StatefulSet
    name: signoz
    jqPathExpressions:
      - .spec.revisionHistoryLimit
      - .spec.persistentVolumeClaimRetentionPolicy
  - group: apps
    kind: StatefulSet
    name: signoz-zookeeper
    jqPathExpressions:
      - .spec.revisionHistoryLimit
      - .spec.persistentVolumeClaimRetentionPolicy

tailscale-ingress:
  enabled: true
  ingresses:
    - name: tailscale
      hostname: signoz
      service:
        name: signoz
        port: 8080

signoz:
  clusterName: homelab

  clickhouse:
    persistence:
      enabled: true
      size: 20Gi

  signoz:
    persistence:
      enabled: true
      size: 1Gi
