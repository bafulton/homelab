namespace: mosquitto

mosquitto:
  # MetalLB LoadBalancer for LAN access (Theengs Gateway, etc.)
  service:
    type: LoadBalancer
    annotations:
      metallb.io/loadBalancerIPs: "192.168.0.202"
    ports:
      mqtt:
        enabled: true
        port: 1883

  # Broker configuration
  config:
    # Allow anonymous - LAN access only, no external exposure
    # Theengs Gateway and Home Assistant will connect without auth
    allowAnonymous: true
    logLevel: information

  # Persistence for retained messages and subscriptions
  persistence:
    enabled: true
    storageClass: longhorn-emmc
    size: 1Gi

# mDNS advertisement for MQTT broker discovery
# Allows Theengs Gateway and other devices to find the broker
mdns-config:
  services:
    - name: Mosquitto
      hostname: mosquitto
      ip: 192.168.0.202
      port: 1883
      types:
        - type: _mqtt._tcp
