namespace: minio

bitwarden-secret:
  secrets:
    - name: minio-credentials
      data:
        rootUser: "longhorn-backup"
        rootPassword: "0a3a525c-8a89-4513-ae77-b3f00030686f"

minio:
  # Deployment mode
  mode: standalone
  replicas: 1

  # Pin to rpi5 node
  nodeSelector:
    kubernetes.io/hostname: rpi5

  # Credentials from bitwarden-secret
  existingSecret: minio-credentials

  # Default requests/limits are way too high; scale them back
  resources:
    requests:
      cpu: 100m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 2Gi

  # Persistence using our custom PVC
  persistence:
    enabled: true
    existingClaim: "minio"
    storageClass: ""

  service:
    type: ClusterIP
    port: 9000

  consoleService:
    type: ClusterIP
    port: 9001

  buckets:
    - name: longhorn-backups
      policy: none
      purge: false

  # Environment variables for S3 endpoint
  environment:
    MINIO_REGION_NAME: us-east-1
