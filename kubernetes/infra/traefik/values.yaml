namespace: traefik

tailscale-ingress:
  ingresses:
    - name: tailscale
      hostname: traefik-dashboard
      service:
        create: true
        targetPort: 8080
        targetSelector:
          app.kubernetes.io/instance: traefik-traefik
          app.kubernetes.io/name: traefik

traefik:
  # A complete list of values can be found here:
  # https://github.com/traefik/traefik-helm-chart/blob/master/traefik/values.yaml
  #
  # Useful examples here:
  # https://github.com/traefik/traefik-helm-chart/blob/master/EXAMPLES.md

  priorityClassName: "system-cluster-critical"

  # Prometheus annotations for auto-discovery by signoz-k8s-infra
  deployment:
    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "9100"

  # MetalLB LoadBalancer IP (from pool 192.168.0.200-250)
  service:
    annotations:
      metallb.io/loadBalancerIPs: "192.168.0.200"

  additionalArguments:
    # Expose dashboard without TLS - safe because it's behind Tailscale Ingress
    # which provides HTTPS termination. Do not expose directly to internet.
    - "--api.insecure=true"

  # Enable metrics endpoint
  metrics:
    prometheus:
      service:
        enabled: true
